# MBTI T/F 분석기 - 실시간 학습 시스템 사용법

## 🚀 시스템 개요

이 시스템은 사용자 데이터가 입력될 때마다 자동으로 테스트 및 튜닝이 진행되는 실시간 학습 시스템입니다.

### 주요 기능
- ✅ 사용자 입력마다 자동 성능 평가
- ✅ 성능 기준 미달 시 자동 프롬프트 튜닝
- ✅ 학습 데이터베이스 자동 관리
- ✅ 실시간 성능 모니터링
- ✅ 사용자 피드백 수집 및 반영

## 🎯 학습 기준

- **최소 입력 수**: 10개
- **허용 오차 비율**: 60% 이상
- **자동 튜닝 조건**: 허용 비율 60% 미만
- **오차 허용 범위**: 10% 이내

## 🌐 웹 인터페이스 접속

1. **메인 페이지**: http://localhost:8001/index_with_learning.html
2. **API 상태**: http://localhost:8001/api/v1/learning/status
3. **학습 히스토리**: http://localhost:8001/api/v1/learning/history

## 💡 사용 방법

### 1단계: 시스템 시작
```bash
python run_realtime_learning.py
```

### 2단계: 웹 브라우저 접속
- http://localhost:8001/index_with_learning.html 접속

### 3단계: 분석 수행
1. 텍스트 입력란에 분석할 답변 입력
2. "분석하기" 버튼 클릭
3. 분석 결과 확인

### 4단계: 학습 피드백 제출
1. 분석 결과 아래의 "학습 피드백" 섹션에서
2. "예상 T/F 점수" 입력 (0-100)
3. "질문" 입력 (선택사항)
4. "피드백 제출" 버튼 클릭

### 5단계: 실시간 학습 모니터링
- 실시간 학습 상태 확인
- 성능 지표 모니터링
- 학습 히스토리 확인

## 📊 실시간 학습 패널

### 학습 상태
- **활성화/비활성화**: 실시간 학습 기능 켜기/끄기
- **총 입력 수**: 지금까지 처리된 입력 개수
- **허용 비율**: 오차 10% 이내인 분석의 비율
- **평균 오차**: 전체 분석의 평균 오차
- **현재 버전**: 현재 사용 중인 프롬프트 버전

### 성능 지표
- **총 입력 수**: 0개 (처음 시작 시)
- **허용 비율**: 0% (처음 시작 시)
- **평균 오차**: 0% (처음 시작 시)
- **현재 버전**: v1.0

## 🔧 API 엔드포인트

### 분석 API
```http
POST /api/v1/analyze
Content-Type: application/json

{
  "text": "분석할 텍스트"
}
```

### 학습 피드백 API
```http
POST /api/v1/learning/feedback
Content-Type: application/json

{
  "question": "질문",
  "answer": "답변",
  "expected_score": 65,
  "actual_score": 70
}
```

### 학습 상태 API
```http
GET /api/v1/learning/status
```

### 학습 토글 API
```http
POST /api/v1/learning/toggle
Content-Type: application/json

{
  "enabled": true
}
```

### 학습 히스토리 API
```http
GET /api/v1/learning/history
```

## 📈 자동 튜닝 프로세스

### 1. 데이터 수집
- 사용자 입력과 예상 점수 저장
- 실제 분석 결과와 비교

### 2. 성능 평가
- 최근 50개 입력 기준으로 성능 계산
- 허용 비율이 60% 미만인지 확인

### 3. 패턴 분석
- 높은 오차 케이스 분석
- T 성향 과소 평가 패턴 확인
- F 성향 과소 평가 패턴 확인

### 4. 프롬프트 개선
- 오차 패턴에 따른 개선사항 추가
- 새로운 프롬프트 버전 생성
- 자동 버전 업데이트

## 🗄️ 데이터베이스 구조

### user_inputs 테이블
- `id`: 고유 식별자
- `question`: 질문
- `answer`: 답변
- `expected_score`: 예상 점수
- `actual_score`: 실제 점수
- `error`: 오차
- `is_acceptable`: 허용 여부
- `timestamp`: 시간
- `prompt_version`: 프롬프트 버전

### prompt_versions 테이블
- `id`: 고유 식별자
- `version`: 버전명
- `prompt`: 프롬프트 내용
- `performance_data`: 성능 데이터
- `created_at`: 생성 시간

## 🔍 학습 히스토리

학습 히스토리에서는 다음 정보를 확인할 수 있습니다:

- ✅/❌: 허용/비허용 상태
- 질문과 답변
- 예상 점수 vs 실제 점수
- 오차율
- 프롬프트 버전
- 시간 정보

## ⚠️ 주의사항

1. **서버 재시작**: 프롬프트 업데이트 후 서버 재시작 필요
2. **데이터 백업**: learning_data.db 파일 백업 권장
3. **성능 모니터링**: 정기적인 성능 지표 확인
4. **피드백 품질**: 정확한 예상 점수 입력 중요

## 🛠️ 문제 해결

### 포트 충돌
```bash
# 다른 포트로 실행
python run_realtime_learning.py
# 포트 8001로 자동 변경됨
```

### 데이터베이스 오류
```bash
# 데이터베이스 파일 삭제 후 재시작
rm learning_data.db
python run_realtime_learning.py
```

### 학습 비활성화
- 웹 인터페이스에서 "학습 비활성화" 버튼 클릭
- 또는 API로 직접 제어

## 📝 예시 사용 시나리오

### 시나리오 1: 초기 학습
1. 시스템 시작
2. 다양한 답변으로 분석 수행
3. 각 분석 결과에 대한 피드백 제출
4. 10개 이상 입력 후 자동 튜닝 확인

### 시나리오 2: 성능 개선
1. 현재 성능 지표 확인
2. 허용 비율이 60% 미만인지 확인
3. 자동 튜닝 진행 상황 모니터링
4. 개선된 성능 지표 확인

### 시나리오 3: 학습 히스토리 분석
1. 학습 히스토리 페이지 접속
2. 오차가 큰 케이스 분석
3. 패턴 파악 및 추가 피드백 제공

## 🎉 성공 지표

- **허용 비율**: 80% 이상 달성
- **평균 오차**: 5% 이하 달성
- **안정적인 성능**: 지속적인 개선
- **사용자 만족도**: 정확한 분석 결과

---

**실시간 학습 시스템을 통해 MBTI T/F 분석기의 정확도가 지속적으로 개선됩니다!** 🚀 